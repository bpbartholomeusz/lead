/**
 * This module is the highest level module for the calendar. It is
 * responsible for initialising all of the components required for
 * the calendar to run. It also coordinates the interaction between
 * components by listening for and responding to different events
 * triggered within the calendar UI.
 *
 *  Improvised from core_calendar.
 *
 * @module     local_booking/calendar
 * @author     Mustafa Hajjar (mustafahajjar@gmail.com)
 * @copyright  BAVirtual.co.uk Â© 2021
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_booking/calendar",["jquery","local_booking/calendar_view_manager","local_booking/slot_actions","core_calendar/selectors","local_booking/events"],(function($,CalendarViewManager,SlotActions,CalendarSelectors){var SELECTORS_DAY="[data-region='day']",SELECTORS_SAVE_BUTTON="[data-region='save-button']",SELECTORS_BOOK_BUTTON="[data-region='book-button']",SELECTORS_COPY_BUTTON="[data-region='copy-button']",SELECTORS_PASTE_BUTTON="[data-region='paste-button']",SELECTORS_CLEAR_BUTTON="[data-region='clear-button']",SELECTORS_CALENDAR_WEEK_WRAPPER=".calendarwrapper";return{init:function(root){root=$(root),CalendarViewManager.startLoading(root),CalendarViewManager.init(root),function(root){const action=$(SELECTORS_CALENDAR_WEEK_WRAPPER).data("action");var contextId=$(SELECTORS_CALENDAR_WEEK_WRAPPER).data("contextid");root.on("click",SELECTORS_SAVE_BUTTON,(function(){SlotActions.saveWeekSlots(root)})),root.on("click",SELECTORS_BOOK_BUTTON,(function(){SlotActions.saveBookedSlot(root)})),root.on("click",SELECTORS_COPY_BUTTON,(function(){SlotActions.copySlots(root)})),root.on("click",SELECTORS_PASTE_BUTTON,(function(){SlotActions.pasteSlots(root)})),root.on("click",SELECTORS_CLEAR_BUTTON,(function(){SlotActions.clearWeekSlots(root)})),contextId&&(root.on("mousedown",SELECTORS_DAY,(function(e){SlotActions.setPosting(!0),SlotActions.postSlots(root,action,$(e.target)),e.preventDefault()})),root.on("mouseover",SELECTORS_DAY,(function(e){SlotActions.postSlots(root,action,$(e.target)),e.preventDefault()})),root.on("mouseup",SELECTORS_DAY,(function(){SlotActions.setPosting(!1)}))),root.find(CalendarSelectors.containers.loadingIcon).addClass("hidden")}(root),CalendarViewManager.stopLoading(root)}}}));

//# sourceMappingURL=calendar.min.js.map
/**
 * This module handles session booking and logentry operations
 * including CRUD and UI events.
 *
 * @module     local_booking/booking_actions
 * @author     Mustafa Hajjar (mustafahajjar@gmail.com)
 * @copyright  BAVirtual.co.uk Â© 2021
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_booking/booking_actions",["jquery","core/str","core/notification","local_booking/repository","local_booking/events","local_booking/selectors","local_booking/booking_view_manager"],(function($,Str,Notification,Repository,BookingSessions,BookingSelectors,ViewManager){return{gotoFeedback:(root,e)=>{let courseId,exerciseId,userId,Source=root.find(BookingSelectors.logentryitem);0!==Source.length?(courseId=Source.data("courseId"),exerciseId=Source.data("exerciseId"),userId=Source.data("userId")):(Source=$(e.target).closest(BookingSelectors.session),courseId=$(BookingSelectors.bookingwrapper).data("courseid"),exerciseId=Source.data("exerciseId"),userId=Source.data("studentId")),$("body").trigger(BookingSessions.gotoFeedback,[exerciseId]),location.href=M.cfg.wwwroot+"/local/booking/assign.php?courseid="+courseId+"&exeid="+exerciseId+"&rownum=0&userid="+userId+"&passed=1"},cancelBooking:(root,e,comment,noshow)=>{ViewManager.startLoading(root);const bookingId=e.target.dataset.bookingid;return Repository.cancelBooking(bookingId,comment,noshow).then((function(response){response.validationerror&&window.alert(Str.get_string("errorlogentrycancel","local_booking"))})).always((function(){$("body").trigger(BookingSessions.sessioncanceled,[root,!1]),Notification.fetchNotifications(),ViewManager.stopLoading(root)})).fail(Notification.exception)}}}));

//# sourceMappingURL=booking_actions.min.js.map
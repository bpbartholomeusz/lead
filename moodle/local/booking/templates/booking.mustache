{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template local_booking/booking

    The interim page for booking a student's session.

    The purpose of this template is to render the main, detailed weekly view.

    Classes required for JS:
    * none

    Data attributes required for JS:
    * none

    Example context (json):
    {
    }
}}
<div id="booking-confirm-{{uniqid}}" data-template="local_booking/booking"
    class="bookingwrapper"{{!
    }}{{#courseid}} data-courseid="{{courseid}}"{{/courseid}}{{!
    }} data-contextid="{{contextid}}"{{!
    }} data-trainingtype="{{trainingtype}}"{{!
    }}>
    <form id="booking">
        {{#activestudents}}
        <input type="hidden" id="courseid" name="courseid" value="{{courseid}}">
        <input type="hidden" id="userid" name="userid" value="{{studentid}}">
        <input type="hidden" id="action" name="action" value="book">
        <input type="hidden" id="time" name="time" value="{{week}}">
        <table
            data-region="session-booking-confirmation"
            class="table-bordered"
            data-courseid="{{courseid}}"
            data-studentid="{{studentid}}">
            <thead>
                <tr>
                    <th class="header booking-header booking-xsmall text-xs-center ">
                        <span class="media-body" aria-hidden="true">#</span>
                    </th>
                    <th class="header booking-header text-xs-center">
                        <span class="media-body" aria-hidden="true">{{#str}} students, local_booking {{/str}}</span>
                    </th>
                    <th class="header booking-header booking-small text-xs-center">
                        <span class="media-body" aria-hidden="true">{{#str}} studentinfoactive, local_booking {{/str}}</span>
                    </th>
                    <th class="header booking-header booking-med text-xs-center">
                        <span class="media-body" aria-hidden="true">{{#str}} simulator, local_booking {{/str}}</span>
                    </th>
                    {{#coursemodules}}
                    <th class="header booking-header booking-xbig text-xs-center"
                        data-toggle="tooltip"
                        title="{{{exercisename}}}"
                        data-html="true"
                        data-region="lesson-exercise">
                        <span class="media-body small" aria-hidden="true">{{#shortentext}} 15, {{{exercisetitle}}} {{/shortentext}}</span>
                    </th>
                    {{/coursemodules}}
                </tr>
            </thead>
            <tbody>
                <tr data-region="student" style="height: 50px;">
                    <td class="text-sm-center"
                        data-toggle="tooltip"
                        title="{{{sequencetooltip}}}"
                        data-html="true">
                        <span class="media-body small" aria-hidden="true">{{sequence}}</span>
                    </td>
                    <td class="booking-truncate">
                        <span><a href="{{profileurl}}">{{studentname}}</a></span><br/>
                    </td>
                    <td class="day text-sm-center">
                        <span class="media-body small{{#overduewarning}} session-overdue{{/overduewarning}}{{#latewarning}} session-late{{/latewarning}}"
                        aria-hidden="true">{{dayssincelast}}</span>
                    </td>
                    <td class="day text-sm-center">
                        <span class="media-body small" aria-hidden="true">{{simulator}}</span>
                    </td>
                    {{#sessionoptions}}
                    <td class="text-sm-center"
                        {{!}}style="{{#graded}}background-color: #f5f5f5;"{{/graded}}{{^graded}}"background-color: white;"{{/graded}}{{#bordered}}"border: 2px double cornflowerblue!important;"{{/bordered}}{{!}}
                        data-type="session-options"
                        data-exercise-id="{{exerciseid}}">
                            <input type="radio" {{nextsession}} value={{exerciseid}} name="exid">
                    </td>
                    {{/sessionoptions}}
                </tr>
            </tbody>
        </table>
        <p>
        <h5>{{#str}} bookingavailabilityposts, local_booking {{/str}}: {{posts}}&nbsp;{{#str}} slots, local_booking {{/str}}</h5>
        <div class="bottom" style="text-align: center;">
            <button type="submit"
                class="btn btn-primary"
                id="continue_button"
                formaction="{{formaction}}">
                {{#str}} continue {{/str}}
            </button>
        </div>
        {{/activestudents}}
    </form>
</div>

{{#js}}
require(['jquery', 'local_booking/booking'], function($, Booking) {
    Booking.init($("#booking-confirm-{{uniqid}}"));
});
{{/js}}
